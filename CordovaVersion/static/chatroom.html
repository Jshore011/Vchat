<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href = "login_signup_styling.css"/>
    <link rel="stylesheet" type="text/css" href = "chatroom_styling.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <title>ChatRoom</title>
</head>
<body>
<div id="navigationBar">
    <ul class="nav-bar-content">
        <li id="homepage">
            <a href="homepage.html">
                VChat
            </a>
            <a href="homepage.html">
                My Chatrooms
            </a>
            <a href="homepage.html">
                Friends
            </a>
            <a href="homepage.html">
                Analytics
            </a>
            <a href="homepage.html">
                Settings
            </a>
            <div class="search-container">
                <form action="/action_page.php">
                    <input type="text" placeholder="Search.." name="search">
                    <button type="submit"><i class="fa fa-search"></i></button>
                </form>
            </div>
        </li>
    </ul>
</div>
    <!--this is the base for the table, all data/images within the html should be removed and populated dynamically with javascript as messages are sent/received-->
<div class = "chat-container" id="chatContainer" style="height: 80%; width: 60%; margin: 0.5% 10% 0.5% 10%; background-color: lightgray; border: 4px darkgreen; border-style: inset; overflow-y: auto;">
    <div id="chatWindow">
        <table id="chatLog" style=" width: 100%">
        <tbody>
        <tr style="border-radius: 30%; border-style: solid; border-color: #1B1B1B; height: 40%">
            <td style="width: 5%">
                <img src="https://media.giphy.com/media/3oJtgd37mxeDib8go0/giphy.gif" style="width:55px; height:55px; border-radius: 50%">
            </td>
            <td class = "recvdMess" style="width: 45%"> message </td>
            <td style="width: 5%">
                <img src="https://media.giphy.com/media/hXcEHA7zYRr4dUNQP8/giphy.gif" style="width:55px; height:55px; border-radius: 50%">
            </td>
        </tr><i class="far fa-microphone"></i>
        </tbody>
        </table>
    </div>
</div>

<div id="recorder" style="margin-left: 35%">
    <button class="record_btn"><i class="fa fa-microphone fa-4x"></i></button>
    <button class ="stop_btn"><i class="fa fa-stop-circle fa-4x"></i></button>
    <button class ="send_btn" onclick="sendChat();"><i class="fa fa-share-square fa-4x"></i></button>
    <audio id="voice_msg"></audio>
</div>

    <script>

        //each time a new chat is received a new row is added to the chatWindow with a sender icon, message object, and associated emoji
        function receiveChat() {
            chatWindow = document.getElementById("chatLog");

            console.log("message received");

            row = chatWindow.insertRow(-1);
            cell1 = row.insertCell(0);
            cell2 = row.insertCell(1);
            cell3 = row.insertCell(2);

            cell1.innerHTML += "<td style=\"width: 5%\">\n" +
                "                <img src=\"https://media.giphy.com/media/3oJtgd37mxeDib8go0/giphy.gif\" style=\"width:55px; height:55px; border-radius: 50%\">\n" +
                "               </td>";
            cell2.innerHTML += "<td class = \"recvdMess\" style=\"width: 45%\"> message </td>";
            cell3.innerHTML += "<td style=\"width: 5%\">\n" +
                "                <img src=\"https://media.giphy.com/media/hXcEHA7zYRr4dUNQP8/giphy.gif\" style=\"width:55px; height:55px; border-radius: 50%\">\n" +
                "               </td>";

        }

        //each time a new chat is sent a new row is added to the chatWindow with associated emoji, message and sender icon
        function sendChat() {
            chatWindow = document.getElementById("chatLog");

            console.log("message sent");

            row = chatWindow.insertRow(-1);
            cell1 = row.insertCell(0);
            cell2 = row.insertCell(1);
            cell3 = row.insertCell(2);

            cell1.innerHTML += "<td style=\"width: 5%\">\n" +
                "                <img src=\"https://media.giphy.com/media/hXcEHA7zYRr4dUNQP8/giphy.gif\" style=\"width:55px; height:55px; border-radius: 50%\">\n" +
                "               </td>";
            cell2.innerHTML += "<td class = \"sentMess\" style=\"width: 45%\"> message </td>";
            cell3.innerHTML += "<td style=\"width: 5%\">\n" +
                "                <img src=\"https://media.giphy.com/media/3oJtgd37mxeDib8go0/giphy.gif\" style=\"width:55px; height:55px; border-radius: 50%\">\n" +
                "               </td>";


        }



    </script>
</body>
</html>